
########## DATA
data_dir: "datasets/cfpb/"
prefix: "cleaned_data.tsv"
train_suffix: ".train"
dev_suffix: ".dev"
test_suffix: ".test"

sos: "<s>"
eos: "</s>"
unk: "<unk>"

# NOTE -- var names can't overlap with features
data_spec:
  - name: "consumer-complaint"
    type: "text"

  - name: "product-in-question"
    type: "categorical"
    control: True
    skip: False
    weight: 1

  - name: "issue-in-question"
    type: "categorical"
    control: True
    skip: False
    weight: 1

  - name: "state-of-origin"
    type: "categorical"
    control: True
    skip: True
    weight: 1

  - name: "company-response"
    type: "categorical"
    control: False
    skip: False
    weight: 1

  - name: "timely-response"
    type: "categorical"
    control: False
    skip: False
    weight: 1


########## MODELING
seed: 1
working_dir: "test_run"

# points to a 1-per-line file of tokens, or null (generate with top_n words)
vocab: null 
top_n: 100

# all of these will be run
model_spec:
  - type: "neural"
    skip: True
    params:
      batch_size: 128
      max_seq_len: 50
      num_train_steps: 1000
      learning_rate: 0.001
      embedding_size: 10
      encoder_layers: 2
      encoder_units: 10
      attn_layers: 2
      attn_units: 10
      classifier_layers: 1
      classifier_units: 10
      regressor_layers: 1
      regressor_units: 10
      gradient_clip: 5.0
      dropout: 0.4

  - type: 'causal-regression'
    skip: True
    params:
      batch_size: 128
      num_train_steps: 1000
      learning_rate: 0.01

  - type: "causal-neural"
    skip: True
    params:
      batch_size: 128
      max_seq_len: 50
      num_train_steps: 1000
      learning_rate: 0.001
      embedding_size: 10
      encoder_layers: 2
      encoder_units: 10
      attn_layers: 2
      attn_units: 10
      classifier_layers: 1
      classifier_units: 10
      regressor_layers: 1
      regressor_units: 10
      gradient_clip: 5.0
      dropout: 0.4


  - type: "mixed-regression"
    skip: True
    params:

  - type: "fixed-regression"
    skip: False
    params:
      regularizor: 'l2'   # [l1, l2]
      lambda: 0.0         # 0 turns regularization off

  - type: "regression"
    skip: False
    params:
      regularizor: 'l2'   # [l1, l2]
      lambda: 0.0         # 0 turns regularization off




######### EVALUATION
feature_importance_threshold: 0.9
